<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OcioPlus - Eventos</title>
    <!-- Incluir el CDN de Tailwind CSS y la fuente Inter -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap'); /* Añadido weight 900 */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #F9FAFB; /* Gray 50 */
        }

        /* Estilos generales para las pantallas */
        .screen {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            width: 100%;
        }

        /* Estilos específicos para la TabBar */
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            padding: 0.5rem;
            transition: all 0.3s ease;
        }

        /* Estilo para el icono activo (gestionado ahora por JS para ser dinámico) */
        .nav-item-active .icon-bg {
            background-color: #06B6D4; /* Cyan 500 */
            box-shadow: 0 4px 15px rgba(6, 182, 212, 0.4);
        }
        .nav-item-active {
            /* Estilos de elemento activo en el TabBar */
            text-shadow: 0 1px 1px rgba(0,0,0,0.1);
        }

        /* Ajuste de padding para PAN1 (Listado) */
        #pantalla1 main {
            /* CORRECCIÓN: Aumentado de 100px a 140px para evitar que el header fijo tape el título */
            padding-top: 140px;
            padding-bottom: 80px; /* Espacio para el TabBar fijo */
        }

        /* Ajuste de padding para PAN2 (Detalle) para evitar que el contenido se solape con el CTA fijo) */
        #pantalla2 main {
            padding-bottom: 80px; /* Espacio para el CTA fijo */
        }

        /* Ajuste de padding para PAN3 (Filtros) */
        #pantalla3 main {
            /* CORRECCIÓN: Ajustado padding-top para el nuevo header con breadcrumb */
            padding-top: 100px;
            padding-bottom: 80px; /* Espacio para el Footer de Filtros */
        }

        #menu-overlay.opacity-100 {
            opacity: 1;
        }
        /* Ajuste de padding para PAN4 (Agenda/Perfil) - Se ajusta con estilo inline en el main */

        /* Estilos para el rango de precios */
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            background: #4F46E5; /* Indigo 600 */
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
        }

        input[type=range]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            background: #4F46E5; /* Indigo 600 */
            border-radius: 50%;
            cursor: pointer;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.2);
            border: none;
        }

    </style>
        <!-- Iconos Lucide (simulando los del mockup) -->
        <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body class="min-h-screen">
    <!-- |---|---------------------------------------------------- -->
    <!-- | 0 | MENU HAMBURGUESA V14 -->
    <!-- |---| ---------------------------------------------------- -->
    <div id="menu-overlay" class="fixed inset-0 bg-black/50 z-40 hidden transition-opacity duration-300 opacity-0" onclick="cerrarMenuHamburguesa()"></div>

        <div id="side-menu" class="fixed top-0 left-0 h-full w-72 bg-white z-50 transform -translate-x-full transition-transform duration-300 ease-in-out shadow-2xl flex flex-col">
            
            <div class="p-6 border-b border-gray-100 flex items-center justify-between bg-slate-900 text-white">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-tr from-indigo-500 to-cyan-400 rounded-full flex items-center justify-center shadow-lg">
                        <i data-lucide="sparkles" class="w-6 h-6 text-white"></i>
                    </div>
                    <div>
                        <h2 class="text-xl font-black tracking-tight">Ocio<span class="text-cyan-400">Plus</span></h2>
                        <p class="text-[10px] text-slate-400 uppercase tracking-widest font-bold">Menú Principal</p>
                    </div>
                </div>
                <button onclick="cerrarMenuHamburguesa()" class="p-2 hover:bg-slate-800 rounded-full transition duration-200">
                    <i data-lucide="x" class="w-6 h-6 text-slate-400"></i>
                </button>
            </div>

            <nav class="flex-grow p-4 space-y-2">
                <a href="javascript:void(0)" onclick="navegarDesdeMenu('pantalla1')" class="flex items-center space-x-3 p-3 rounded-xl text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition group">
                    <i data-lucide="home" class="w-5 h-5 group-hover:scale-110 transition"></i>
                    <span class="font-semibold">Inicio</span>
                </a>
                
                <a href="javascript:void(0)" onclick="navegarDesdeMenu('pantalla3')" class="flex items-center space-x-3 p-3 rounded-xl text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition group">
                    <i data-lucide="search" class="w-5 h-5 group-hover:scale-110 transition"></i>
                    <span class="font-semibold">Búsqueda por filtros</span>
                </a>

                <a href="javascript:void(0)" onclick="navegarDesdeMenu('pantalla4')" class="flex items-center space-x-3 p-3 rounded-xl text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 transition group">
                    <i data-lucide="user" class="w-5 h-5 group-hover:scale-110 transition"></i>
                    <span class="font-semibold">Perfil</span>
                </a>

                <div class="border-t border-gray-100 my-4"></div>

                <a href="mailto:soporte@ocioplus.com" class="flex items-center space-x-3 p-3 rounded-xl text-gray-700 hover:bg-green-50 hover:text-green-600 transition group">
                    <i data-lucide="mail" class="w-5 h-5 group-hover:scale-110 transition"></i>
                    <span class="font-semibold">Contacta con nosotros</span>
                </a>
            </nav>

            <div class="p-6 border-t border-gray-100 text-center">
                <p class="text-xs text-gray-400">Versión 1.0.4 - 2025</p>
            </div>
    </div>

    <!-- |---|---------------------------------------------------- -->
    <!-- | 1 | PANTALLA 1: INICIO / LISTADO DE EVENTOS (PAN1) -->
    <!-- |---| ---------------------------------------------------- -->
    <div id="pantalla1" class="screen">

        <header id="main-header" class="header-fixed fixed top-0 left-0 w-full z-10 bg-white p-3">
            <div id="pan1-header" class="max-w-xl mx-auto">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-2">
                        <button onclick="mostrarMenuHamburguesa()" class="p-2 rounded-full hover:bg-gray-100">
                            <i data-lucide="menu" class="w-6 h-6 text-gray-700"></i>
                        </button>
                        <h1 class="text-2xl font-extrabold text-cyan-700">OcioPlus</h1>
                    </div>
                        <button onclick="mostrarCarrito()" class="p-2 rounded-full hover:bg-gray-100 relative">
                        <i data-lucide="shopping-cart" class="w-6 h-6 text-gray-700"></i>
                        <!-- RF 1.07: Contador de ítems en el carrito (simulado) -->
                        <span id="cart-counter" class="absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full">0</span>
                    </button>
                </div>
                
                <!-- Área de Búsqueda (RF 1.08, 1.09) -->
                <div class="max-w-xl mx-auto mt-2 flex space-x-2">
                    <div class="relative flex-grow">
                        <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"></i>
                        <input type="text" id="search-input" oninput="filtrarEventosInicio()" placeholder="Buscar eventos..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-full focus:ring-cyan-500 focus:border-cyan-500 shadow-sm transition">
                    </div>
                    <button onclick="mostrarPantalla3()" class="p-3 bg-cyan-600 text-white rounded-full hover:bg-cyan-700 transition">
                        <i data-lucide="sliders" class="w-5 h-5"></i>
                    </button>
                </div>
            </div>
            
            <!-- Header de la Pantalla 2 (Detalle) - Inicialmente Oculto y actualmente sin uso-->
            <div id="pan2-header" class="hidden flex items-center justify-between max-w-xl mx-auto">
                <button onclick="handleNavigation('PAN1')" class="p-2 rounded-full hover:bg-gray-100">
                    <i data-lucide="arrow-left" class="w-6 h-6 text-gray-700"></i>
                </button>
                <h1 class="text-xl font-bold text-gray-800 truncate" id="pan2-title-header">Detalle del Evento</h1>
                <button id="pan2-favorite-button" onclick="toggleFavorite(currentEvent ? currentEvent.ID_EVENTO : null)" class="p-2 rounded-full hover:bg-gray-100">
                    <!-- Icono de Corazón se actualiza con JS -->
                    <i data-lucide="heart" class="w-6 h-6 text-gray-700"></i> 
                </button>
            </div>
        </header>

        <!-- 2. BODY PRINCIPAL (LISTADO DE EVENTOS) -->
        <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 flex-grow">
            <!-- El aumento del padding en CSS asegura que este título sea visible -->
            <h2 class="text-3xl font-bold text-gray-800 mb-6" id="list-title">Próximos Eventos</h2>

            <!-- Contenedor Grid Responsivo (Grid de 1, 2 o 3 columnas) -->
            <div id="events-list" class="grid gap-6 sm:grid-cols-1 md:grid-cols-2 lg:grid-cols-3">

                
                <!-- Las tarjetas ahora tienen un manejador de clic para ir a PAN2 -->
                <!-- EJEMPLO 1: Concierto Rock -->
                <!--<div onclick="mostrarPantalla2()" class="bg-white rounded-xl shadow-lg overflow-hidden border border-gray-100 transform hover:scale-[1.02] transition duration-300 ease-out cursor-pointer">
                    <div class="relative h-40">
                        <img src="https://placehold.co/600x400/3b82f6/ffffff?text=CONCIERTO+ROCK" alt="" class="w-full h-full object-cover">
                        <span class="absolute top-2 left-2 bg-indigo-600 text-white text-xs font-semibold px-2 py-1 rounded-full">Música</span>
                    </div>
                    <div class="p-4">
                        <h3 class="text-xl font-bold text-gray-900 mb-1 truncate">Concierto Rock</h3>
                        <p class="text-sm text-gray-500 mb-2 flex items-center space-x-1">
                            <i data-lucide="map-pin" class="h-4 w-4"></i>
                            <span>Madrid, 15 NOV • 20:00 h</span>
                        </p>
                        <div class="flex items-center justify-between mt-3 pt-3 border-t border-gray-100">
                            <span class="text-xl font-extrabold text-green-600">25.00 €</span>
                            <button class="bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-semibold px-4 py-2 rounded-lg transition duration-300">
                                Detalles
                            </button>
                        </div>
                    </div>
                </div>-->

                
            </div>

            <!-- Botón Cargar Más -->
            <div class="flex justify-center my-8">
                <button 
                    id="btn-cargar-mas"
                    onclick="cargarMasEventos()"
                    class="bg-gray-200 hover:bg-gray-300 text-gray-700 font-semibold py-2 px-6 rounded-full transition duration-300 shadow-sm">
                Cargar más eventos
                </button>
            </div>

        </main>

        <!-- 3. FOOTER FIJO (TAB BAR INFERIOR MODERNO) -->
        <footer class="fixed bottom-0 left-0 right-0 bg-white shadow-[0_-5px_20px_rgba(0,0,0,0,0.1)] z-20 rounded-t-3xl border-t border-gray-100">
            <nav class="max-w-4xl mx-auto flex justify-around items-end h-20 pb-2 px-4">

                <a href="javascript:void(0)" id="nav-cercanos" class="nav-item flex flex-col items-center text-gray-500 hover:text-indigo-600 group" onclick="setActiveTab('cercanos'); mostrarPantalla1();">
                    <div class="icon-bg w-10 h-10 rounded-full group-hover:bg-gray-100 transition duration-300 flex items-center justify-center">
                        <i data-lucide="map-pin" class="h-6 w-6"></i>
                    </div>
                    <span class="text-[10px] mt-1 transition duration-300 group-hover:font-semibold">Cercanos</span>
                </a>

                <a href="javascript:void(0)" id="nav-valorados" class="nav-item flex flex-col items-center text-gray-500 group" onclick="setActiveTab('valorados'); mostrarPantalla1();">
                    <div class="icon-bg w-14 h-14 bg-indigo-600 rounded-full shadow-lg transform -translate-y-4 transition duration-300 flex items-center justify-center border-4 border-white">
                        <i data-lucide="star" class="h-8 w-8 text-white fill-white"></i>
                    </div>
                    <span class="text-[10px] -mt-3 mb-1 transition duration-300 font-bold text-indigo-600">Valorados</span>
                </a>

                <a href="javascript:void(0)" id="nav-perfil" class="nav-item flex flex-col items-center text-gray-500 hover:text-indigo-600 group" onclick="mostrarPantalla('pantalla4')">
                    <div class="icon-bg w-10 h-10 rounded-full group-hover:bg-gray-100 transition duration-300 flex items-center justify-center">
                        <i data-lucide="user" class="h-6 w-6"></i>
                    </div>
                    <span class="text-[10px] mt-1 transition duration-300 group-hover:font-semibold">Perfil</span>
                </a>
            </nav>
        </footer>
    </div>


    <!-- ---------------------------------------------------- -->
    <!-- PANTALLA 2: DETALLE DE EVENTO (PAN2) -->
    <!-- ---------------------------------------------------- -->
    <div id="pantalla2" class="screen hidden bg-white">
        <header class="relative h-80">
            <img id="p2-imagen" src="" alt="" class="w-full h-full object-cover">

            <div class="absolute top-4 left-4">
                <button onclick="mostrarPantalla1()" class="bg-white/80 p-2 rounded-full shadow-lg hover:bg-white transition duration-200">
                    <i data-lucide="chevron-left" class="h-6 w-6 text-gray-800"></i>
                </button>
            </div>
            <div class="absolute top-4 right-4">
                <button id="p2-btn-favorito" class="bg-white/80 p-2 rounded-full shadow-lg hover:bg-white transition duration-200">
                    <i data-lucide="bookmark" class="h-6 w-6 text-gray-800"></i>
                </button>
            </div>
        </header>

        <main class="flex-grow max-w-4xl mx-auto -mt-10 z-10 relative px-4 sm:px-6 lg:px-8">
            <div class="bg-white p-6 rounded-t-3xl shadow-xl">
                <h1 id="p2-titulo" class="text-4xl font-extrabold text-gray-900 mb-4 uppercase"></h1>

                <div class="space-y-3 mb-6 border-b pb-4">
                    <p class="text-lg text-gray-700 flex items-center space-x-3">
                        <i data-lucide="calendar" class="h-6 w-6 text-indigo-500"></i>
                        <span class="font-semibold">Fecha:</span> <span id="p2-fecha"></span>
                    </p>
                    <p class="text-lg text-gray-700 flex items-center space-x-3">
                        <i data-lucide="clock" class="h-6 w-6 text-indigo-500"></i>
                        <span class="font-semibold">Hora:</span> <span id="p2-hora"></span>
                    </p>
                    <p class="text-lg text-gray-700 flex items-center space-x-3">
                        <i data-lucide="map-pin" class="h-6 w-6 text-indigo-500"></i>
                        <span class="font-semibold">Ubicación:</span> <span id="p2-ubicacion"></span>
                    </p>
                </div>

                <h2 class="text-2xl font-bold text-gray-800 mb-3">Sobre el Evento</h2>
                <p id="p2-descripcion" class="text-gray-600 mb-6 leading-relaxed"></p>

                <div class="text-center p-4 bg-green-50 rounded-xl">
                    <span class="text-sm font-medium text-gray-600 block">Precio base por persona</span>
                    <span id="p2-precio-caja" class="text-4xl font-extrabold text-green-600"></span>
                </div>
            </div>
        </main>

        <footer class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 shadow-2xl z-20 p-4">
            <div class="max-w-4xl mx-auto">
                <button id="p2-btn-reserva" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 rounded-xl transition duration-300 shadow-lg shadow-indigo-500/50 text-lg">
                </button>
            </div>
        </footer>
    </div>


    <!-- ---------------------------------------------------- -->
    <!-- PANTALLA 3: FILTROS (PAN3) -->
    <!-- ---------------------------------------------------- -->
    <div id="pantalla3" class="screen hidden bg-white">

    <header class="fixed top-0 left-0 right-0 bg-white shadow-md z-20">
        <div class="max-w-4xl mx-auto p-4 pb-2 flex flex-col">
            <div class="flex items-center text-sm mb-2 text-gray-500">
                <a href="javascript:void(0)" onclick="mostrarPantalla1()" class="hover:text-indigo-600 transition duration-200 font-medium">Inicio</a>
                <i data-lucide="chevron-right" class="h-4 w-4 mx-1"></i>
                <span class="font-semibold text-gray-800">Filtros</span>
            </div>

            <div class="flex items-center justify-between">
                <h1 class="text-2xl font-bold text-gray-800">Filtros Avanzados</h1>
                <button onclick="mostrarPantalla1()" class="text-gray-500 hover:text-gray-800 transition duration-200 p-1">
                    <i data-lucide="x" class="h-6 w-6"></i>
                </button>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 flex-grow overflow-y-auto" style="padding-top: 100px; padding-bottom: 100px;">

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <section class="p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center space-x-2 border-b pb-2">
                    <i data-lucide="list-checks" class="h-5 w-5 text-cyan-500"></i>
                    <span>Categorías</span>
                </h2>
                <div id="filter-categories-container" class="grid grid-cols-2 gap-2">
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Música" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Música</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Monólogos" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Monólogos</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Musicales" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Musicales</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Festivales" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Festivales</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Motor" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Motor</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Arte" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Arte</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Comedia" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Comedia</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Ópera" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Ópera</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Deportes" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Deportes</span>
                    </label>
                    <label class="flex items-center space-x-2 p-2 rounded-lg border border-gray-100 hover:bg-gray-50 cursor-pointer">
                        <input type="checkbox" name="f-categoria" value="Conferencias" class="w-4 h-4 text-indigo-600 rounded">
                        <span class="text-sm">Conferencias</span>
                    </label>
                </div>
            </section>
            
            <section class="p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center space-x-2 border-b pb-2">
                    <i data-lucide="calendar-check" class="h-5 w-5 text-green-500"></i>
                    <span>¿Cuándo?</span>
                </h2>
                <select id="f-fecha" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                    <option value="todas" selected>Cualquier fecha</option>
                    <option value="hoy">Hoy</option>
                    <option value="semana">Esta semana</option>
                    <option value="finsemana">Este fin de semana</option>
                    <option value="mes">Este mes</option>
                </select>
            </section>

            <section class="p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-lg font-bold text-gray-800 mb-6 flex items-center space-x-2 border-b pb-2">
                    <i data-lucide="euro" class="h-5 w-5 text-indigo-500"></i>
                    <span>Presupuesto Máximo</span>
                </h2>
                <div class="flex justify-between items-center mb-4 px-2">
                    <span class="text-sm font-bold text-gray-400 uppercase">0 €</span>
                    <div class="bg-indigo-100 px-4 py-1 rounded-full">
                        <span id="f-precio-valor" class="text-xl font-black text-indigo-600">50 €</span>
                    </div>
                </div>
                <input type="range" id="f-precio-range" min="0" max="200" step="5" value="50" 
                    oninput="document.getElementById('f-precio-valor').innerText = this.value + ' €'"
                    class="w-full h-2 bg-indigo-100 rounded-lg appearance-none cursor-pointer accent-indigo-600">
            </section>

            <section class="p-4 bg-white rounded-xl shadow-sm border border-gray-100">
                <h2 class="text-lg font-bold text-gray-800 mb-4 flex items-center space-x-2 border-b pb-2">
                    <i data-lucide="route" class="h-5 w-5 text-orange-500"></i>
                    <span>Distancia Máxima</span>
                </h2>
                <select id="f-distancia" class="w-full p-3 bg-gray-50 border border-gray-200 rounded-lg focus:ring-2 focus:ring-indigo-500 outline-none">
                    <option value="9999" selected>Sin límite</option>
                    <option value="10">10 km</option>
                    <option value="20">20 km</option>
                    <option value="50">50 km</option>
                    <option value="100">100 km</option>
                    <option value="200">200 km</option>
                    <option value="500">500 km</option>
                </select>
                <p class="text-[10px] text-gray-400 mt-2 italic">* La distancia se calcula desde tu posición GPS actual.</p>
            </section>    
        </div>
    </main>

    <footer class="fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 shadow-2xl z-20 p-4">
        <div class="max-w-4xl mx-auto flex space-x-4">
            <button onclick="limpiarFiltros()" class="w-1/3 border-2 border-gray-200 text-gray-500 font-bold py-3 rounded-xl transition hover:bg-gray-50">
                Limpiar
            </button>
            <button onclick="aplicarFiltros()" class="w-2/3 bg-indigo-600 hover:bg-indigo-700 text-white font-black py-3 rounded-xl transition shadow-lg shadow-indigo-500/50 text-lg">
                Ver resultados
            </button>
        </div>
    </footer>
</div>


    <!-- ---------------------------------------------------- -->
    <!-- PANTALLA 4: PERFIL / AGENDA (PAN4) -->
    <!-- ---------------------------------------------------- -->
    <div id="pantalla4" class="screen hidden bg-gray-50">

        <!-- 1. HEADER FIJO (NAV SUPERIOR - Perfil) -->
        <header class="fixed top-0 left-0 right-0 bg-white shadow-md z-20">
            <div class="max-w-4xl mx-auto p-4 pb-2 flex flex-col">

                <!-- Breadcrumb de Navegación (Inicio > Mi Agenda) -->
                <div class="flex items-center text-sm mb-2 text-gray-500">
                    <!-- Enlace a Inicio (PAN1) -->
                    <a href="javascript:void(0)" onclick="mostrarPantalla1()" class="hover:text-indigo-600 transition duration-200 font-medium">Inicio</a>
                    <i data-lucide="chevron-right" class="h-4 w-4 mx-1"></i>
                    <span class="font-semibold text-gray-800">Mi Agenda</span>
                </div>

                <!-- Título y Botones de Control (Cerrar y Configuración) -->
                <div class="flex items-center justify-between">
                    <h1 class="text-2xl font-extrabold text-gray-800">Mi Agenda</h1>

                    <!-- Contenedor de botones (Cerrar y Configuración) - MODIFICADO -->
                    <div class="flex space-x-2">
                        <!-- Botón de Cerrar (NUEVO) -->
                        <button onclick="mostrarPantalla1()" class="p-2 text-gray-500 hover:text-gray-800 transition duration-200 rounded-full">
                            <i data-lucide="x" class="h-6 w-6"></i>
                        </button>
                        <!-- Botón de Configuración/Perfil -->
                        <button class="p-2 text-gray-500 hover:text-gray-800 transition duration-200 rounded-full">
                            <i data-lucide="settings" class="h-6 w-6"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Toggle Tabs (Comprados / Guardados) -->
            <div class="max-w-4xl mx-auto px-4 flex border-b border-gray-200">
                <button id="tab-comprados" onclick="selectTab('comprados')" class="py-3 px-4 text-sm font-semibold border-b-2 border-indigo-600 text-indigo-600 transition duration-300 flex-grow">
                    Comprados (0)
                </button>
                <button id="tab-guardados" onclick="selectTab('guardados')" class="py-3 px-4 text-sm font-semibold border-b-2 border-transparent text-gray-500 hover:text-gray-700 transition duration-300 flex-grow">
                    Guardados (0)
                </button>
            </div>
        </header>

        <!-- 2. BODY PRINCIPAL (Contenido de las pestañas) -->
        <!-- Se ha aumentado el padding-top del main para dejar espacio al nuevo header de perfil (incluyendo breadcrumb) -->
        <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 flex-grow overflow-y-auto" style="padding-top: 155px; padding-bottom: 80px;">

            <!--####EVENTOS COMPRADOS#####-->
            <!-- Contenido: Eventos Comprados -->
            <div id="content-comprados" class="space-y-6">

                <h2 class="text-xl font-bold text-gray-700 mt-4 mb-2">Eventos con Entrada</h2>

                <!-- Tarjeta de Evento Comprado (EJEMPLO 1: Concierto Rock) -->
                <div id="lista-comprados" class="space-y-4">
                    <!--V12 Hemos dejado vacía para rellenar con JS, pero en el mockup estaban las tarjetas-->
                </div>

            </div>

            <!--####EVENTOS GUARDADOS#####-->
            <!-- Contenido: Eventos Guardados (Inicialmente oculto) -->
            <div id="content-guardados" class="space-y-6 hidden">

                <h2 class="text-xl font-bold text-gray-700 mt-4 mb-2">Mi Lista de Deseados</h2>

                <!-- Tarjeta de Evento Guardado (EJEMPLO 1: Arte Moderno) -->
                <div id="lista-guardados" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                     <!-- V12 Hemos dejado vacía para rellenar con JS, pero en el mockup estaban las tarjetas-->
                </div>
            </div>

        </main>

    <!-- El footer de PAN4 es el mismo TabBar de PAN1, manejado globalmente. -->
    </div>

    <!-- MODAL DE VISUALIZACIÓN QR (Fuera de PAN4) -->
    <div id="qr-modal" class="fixed inset-0 bg-gray-900 bg-opacity-75 z-50 hidden flex items-center justify-center p-4" onclick="closeQrModal()">
        <div class="bg-white rounded-xl p-8 max-w-sm w-full shadow-2xl" onclick="event.stopPropagation()">
            <h3 class="text-2xl font-bold text-gray-900 mb-4 text-center">Tu Entrada</h3>
            <p class="text-center text-sm text-gray-600 mb-4">Muestra este código al acceder al evento.</p>
            <!-- Simulación de Código QR -->
            <div class="bg-white p-4 border-8 border-gray-100 rounded-lg">
                <img src="https://placehold.co/300x300/1F2937/F9FAFB?text=QR+CODE" alt="[Image of QR Code]" class="w-full h-auto rounded">
            </div>
            <p class="text-center text-xs font-mono mt-4 text-gray-800 break-all">#XP-3209R</p>
            <button onclick="closeQrModal()" class="w-full mt-6 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-xl transition duration-300">
                Cerrar
            </button>
        </div>
    </div>


    <!-- ---------------------------------------------------- -->
    <!-- EXTRA: PANTALLA 2: PANEL DE COMPRA DE ENTRADAS
    <!-- ---------------------------------------------------- -->
    <div id="purchase-panel-overlay" class="fixed inset-0 bg-black/50 z-50 hidden backdrop-blur-sm transition-opacity duration-300 opacity-0">

    </div>

        <div id="purchase-panel" class="fixed top-0 right-0 h-full w-full max-w-md bg-white z-[60] shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out flex flex-col">
            <div class="p-6 border-b flex justify-between items-center bg-indigo-50">
                <div>
                    <h3 class="text-xl font-bold text-gray-900">Finalizar Reserva</h3>
                    <p id="panel-event-name" class="text-sm text-indigo-600 font-medium truncate"></p>
                </div>
                <button onclick="closePurchasePanel()" class="p-2 hover:bg-white rounded-full transition">
                    <i data-lucide="x" class="h-6 w-6 text-gray-500"></i>
                </button>
            </div>

            <div class="p-6 flex-grow overflow-y-auto">
                <div class="mb-8">
                    <label class="block text-sm font-bold text-gray-500 uppercase tracking-wider mb-4">Selecciona cantidad</label>
                    <div class="flex items-center justify-between bg-gray-50 p-4 rounded-2xl border-2 border-gray-100">
                        <span class="text-gray-700 font-semibold">Entradas</span>
                        <div class="flex items-center space-x-6">
                            <button onclick="updatePanelQuantity(-1)" class="w-10 h-10 rounded-full bg-white shadow-md flex items-center justify-center text-indigo-600 hover:bg-indigo-600 hover:text-white transition">
                                <i data-lucide="minus" class="h-5 w-5"></i>
                            </button>
                            <span id="panel-quantity" class="text-2xl font-black text-gray-900">1</span>
                            <button onclick="updatePanelQuantity(1)" class="w-10 h-10 rounded-full bg-white shadow-md flex items-center justify-center text-indigo-600 hover:bg-indigo-600 hover:text-white transition">
                                <i data-lucide="plus" class="h-5 w-5"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <div class="space-y-3 border-t pt-6">
                    <div class="flex justify-between text-gray-600">
                        <span>Subtotal</span>
                        <span id="panel-subtotal">0.00 €</span>
                    </div>
                    <div class="flex justify-between text-gray-600">
                        <span>Gastos de gestión (10%)</span>
                        <span id="panel-taxes">0.00 €</span>
                    </div>
                    <div class="flex justify-between text-xl font-black text-gray-900 pt-3 border-t">
                        <span>Total</span>
                        <span id="panel-total" class="text-indigo-600">0.00 €</span>
                    </div>
                </div>
            </div>

            <div class="p-6 border-t bg-gray-50">
                <button id="btn-confirmar-compra" class="w-full bg-green-600 hover:bg-green-700 text-white font-black py-4 rounded-2xl transition shadow-xl flex items-center justify-center space-x-2">
                    <i data-lucide="check-circle" class="h-5 w-5"></i>
                    <span>Confirmar y Pagar</span>
                </button>
            </div>
        </div> 

<script src="javascript2.js"></script>

</body>
</html>
