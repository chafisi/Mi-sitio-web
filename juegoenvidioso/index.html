<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Regalo Envidioso üéÅ</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <style>
        :root {
            --primary: #ff4757;
            --secondary: #2f3542;
            --success: #2ed573;
            --bg: #f1f2f6;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background-color: var(--bg);
            margin: 0;
            display: flex;
            justify-content: center;
            color: var(--secondary);
        }

        #app {
            width: 100%;
            max-width: 500px;
            padding: 20px;
            box-sizing: border-box;
        }

        /* --- PANTALLA REGISTRO --- */
        .login-screen {
            text-align: center;
            margin-top: 50px;
        }

        .login-card {
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        input {
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #ddd;
            border-radius: 10px;
            box-sizing: border-box;
            font-size: 16px;
        }

        /* --- PANTALLA JUEGO --- */
        .game-header {
            background: var(--secondary);
            color: white;
            padding: 15px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
            position: sticky;
            top: 10px;
            z-index: 100;
        }

        .grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .gift-card {
            background: white;
            border-radius: 15px;
            padding: 15px;
            text-align: center;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 3px solid transparent;
            transition: all 0.3s ease;
            position: relative;
        }

        .gift-card.is-opened {
            border-color: var(--success);
            background: #f0fff4;
        }

        .gift-card.is-mine {
            border-color: var(--primary);
            background: #fff5f5;
        }

        .owner-tag {
            font-size: 12px;
            background: var(--secondary);
            color: white;
            padding: 2px 8px;
            border-radius: 10px;
            position: absolute;
            top: -10px;
            left: 50%;
            transform: translateX(-50%);
            white-space: nowrap;
        }

        .gift-icon {
            font-size: 40px;
            margin: 10px 0;
            display: block;
        }

        .package-name {
            font-weight: bold;
            font-size: 14px;
            margin-bottom: 10px;
            min-height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* --- BOTONES --- */
        button {
            background: var(--primary);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            font-size: 14px;
        }

        button:disabled {
            background: #ccc;
        }

        button.btn-steal {
            background: var(--secondary);
        }

        .log {
            margin-top: 20px;
            font-size: 13px;
            color: #666;
            background: #fff;
            padding: 10px;
            border-radius: 10px;
            max-height: 100px;
            overflow-y: auto;
        }
    </style>
</head>
<body>

<div id="app">
    <div v-if="screen === 'login'" class="login-screen">
        <h1>üéÅ Regalo Envidioso</h1>
        <div class="login-card">
            <p>Introduce tus datos para participar</p>
            <input v-model="user.name" type="text" placeholder="Tu nombre o apodo">
            <input v-model="user.giftDesc" type="text" placeholder="Descripci√≥n del envoltorio">
            <button @click="startGame" :disabled="!user.name || !user.giftDesc">Entrar al juego</button>
        </div>
    </div>

    <div v-if="screen === 'game'">
        <div class="game-header">
            <div>Jugador: <strong>{{ user.name }}</strong></div>
            <small v-if="myGiftId">Llevas: {{ getGiftName(myGiftId) }}</small>
            <small v-else>No tienes regalo todav√≠a</small>
        </div>

        <div class="grid">
            <div v-for="gift in gifts" :key="gift.id" 
                 class="gift-card" 
                 :class="{ 'is-opened': gift.opened, 'is-mine': gift.owner === user.name }">
                
                <span v-if="gift.owner" class="owner-tag">üë§ {{ gift.owner }}</span>
                
                <span class="gift-icon">{{ gift.opened ? 'ü§°' : 'üéÅ' }}</span>
                
                <div class="package-name">
                    {{ gift.opened ? gift.content : gift.description }}
                </div>

                <button v-if="!gift.opened" @click="openGift(gift)">
                    Abrir paquete
                </button>

                <button v-if="gift.opened && gift.owner !== user.name" 
                        class="btn-steal" 
                        @click="stealGift(gift)">
                    ¬°Robar!
                </button>
            </div>
        </div>

        <div class="log">
            <strong>√öltimos movimientos:</strong>
            <div v-for="msg in history">{{ msg }}</div>
        </div>
    </div>
</div>

<script>
    const { createApp, ref, reactive } = Vue;

    createApp({
        setup() {
            const screen = ref('login');
            const user = reactive({ name: '', giftDesc: '' });
            const history = ref([]);
            const myGiftId = ref(null);

            // Simulamos 10 regalos (el tuyo + 9 generados)
            const gifts = ref([
                { id: 1, description: 'Caja rectangular roja', content: 'Gafas gigantes', opened: false, owner: null },
                { id: 2, description: 'Sobre acolchado azul', content: 'Nariz de payaso', opened: false, owner: null },
                { id: 3, description: 'Papel de peri√≥dico', content: 'Peluca fucsia', opened: false, owner: null },
                { id: 4, description: 'Bolsa de cart√≥n dorada', content: 'Antenas de alien', opened: false, owner: null },
                { id: 5, description: 'Caja de zapatos', content: 'Bigote mexicano', opened: false, owner: null },
                { id: 6, description: 'Envoltorio de burbujas', content: 'Sombrero de copa', opened: false, owner: null },
                { id: 7, description: 'Lazo enorme verde', content: 'Capa de mago', opened: false, owner: null },
                { id: 8, description: 'Paquete muy peque√±o', content: 'Dientes de vampiro', opened: false, owner: null },
                { id: 9, description: 'Caja circular plateada', content: 'M√°scara de luchador', opened: false, owner: null }
            ]);

            const startGame = () => {
                // A√±adimos nuestro propio regalo a la lista
                gifts.value.push({
                    id: Date.now(),
                    description: user.giftDesc,
                    content: 'Pendiente de revelar...', // En el juego real esto lo pone el due√±o
                    opened: false,
                    owner: null
                });
                screen.ref = 'game';
                screen.value = 'game';
            };

            const openGift = (gift) => {
                // Si ya ten√≠amos un regalo, este queda libre (o seg√∫n vuestra regla)
                if(myGiftId.value) {
                    const oldGift = gifts.value.find(g => g.id === myGiftId.value);
                    oldGift.owner = null;
                }

                gift.opened = true;
                gift.owner = user.name;
                myGiftId.value = gift.id;
                
                // Si es el regalo que nosotros mismos trajimos, pedimos que diga qu√© es
                if(gift.description === user.giftDesc) {
                    const realContent = prompt("¬øQu√© complemento de risa hay dentro?");
                    gift.content = realContent || "Sorpresa de risa";
                }

                history.value.unshift(`Abriste: ${gift.content}`);
            };

            const stealGift = (gift) => {
                const victim = gift.owner;
                
                // El due√±o anterior se queda sin regalo
                if(myGiftId.value) {
                    const myOldGift = gifts.value.find(g => g.id === myGiftId.value);
                    myOldGift.owner = null;
                }

                gift.owner = user.name;
                myGiftId.value = gift.id;
                
                history.value.unshift(`¬°Le has robado a ${victim} su ${gift.content}!`);
            };

            const getGiftName = (id) => {
                const g = gifts.value.find(g => g.id === id);
                return g ? (g.opened ? g.content : g.description) : '';
            };

            return {
                screen, user, gifts, history, myGiftId,
                startGame, openGift, stealGift, getGiftName
            }
        }
    }).mount('#app')
</script>

</body>
</html>
